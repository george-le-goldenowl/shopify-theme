<section class="section-content-other">
    <div class="container">
        <div class="register">
            <form method="post" action="/account" id="create_customer" accept-charset="UTF-8">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 class="ttl-4 text-center">Create New Customer Account</h4>
                        <div class="shipping__ttl">Personal Information</div>
                        <div class="shipping__form">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="">First name<span class="txt-error">*</span></label>
                                        <input type="text" name="firstName" class="form-control form-control-line" data-required="true">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="">Last Name<span class="txt-error">*</span></label>
                                        <input type="text" name="lastName" class="form-control form-control-line" data-required="true">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" name="newsletter" class="custom-control-input" id="customCheck1">
                                    <label class="custom-control-label" for="customCheck1"> Sign Up for Newsletter</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Type of Customer<span class="txt-error">*</span></label>
                                <select name="customerType" id="myselection" class="form-control form-control-line" data-required="true">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                </select>
                            </div>
                            <div id="forpartner" class="forpartner">
                                <div class="form-group">
                                    <label for="">Sample<span class="txt-error">*</span></label>
                                    <input type="text" class="form-control form-control-line">
                                </div>
                                <div class="form-group">
                                    <label for="">Sample<span class="txt-error">*</span></label>
                                    <input type="text" class="form-control form-control-line">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" name="assistance" class="custom-control-input" id="customCheck2">
                                    <label class="custom-control-label" for="customCheck2"> Allow remote shopping assistance</label>
                                </div>
                            </div>
                        </div>
                        <div class="shipping__ttl">Sign-in Information</div>
                        <div class="shipping__form">
                            <div class="form-group">
                                <label for="">Email<span class="txt-error">*</span></label>
                                <input type="email" name="email" class="form-control form-control-line" data-required="true">
                            </div>
                            <div class="form-group">
                                <label for="password">Password<span class="txt-error">*</span></label>
                                <input type="password" name="password" id="password" class="form-control form-control-line" data-required="true">
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Confirm Password <span class="txt-error">*</span></label>
                                <input type="password" name="passwordConfirm" id="confirmPassword" class="form-control form-control-line" data-required="true">
                            </div>
                            <div class="form-group">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="show-password" onclick="onShow(this)" data-required="true">
                                    <label class="custom-control-label" for="show-password"> Show Password</label>
                                </div>
                            </div>
                        </div>
                        <div class="shipping__btn row">
                            <div class="col-sm-6">
                                <div class="shipping__btn">
                                    <div class="btn-payment"><a href="javascript:void(0)" onclick="onSubmit(this)">Create an Account</a></div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="shipping__btn">
                                    <div class="btn-back">{{ 'Back' | link_to: shop.secure_url }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>
<style type="text/css">
.requiredErr {
    border-color: red;
}
</style>
<script type="text/javascript">
var registerForm = document.querySelector('#create_customer'),
    passwordFields = document.querySelectorAll('input[name=password], input[name=password-confirm]'),
    requiredFields = registerForm.querySelectorAll('input[data-required=true]');

function onShow(e) {
    if (e.checked) {
        passwordFields.forEach(e => {
            e.type = 'text';
        })
    } else {
        passwordFields.forEach(e => {
            e.type = 'password';
        })
    }
}
function verifyRequired() {
    var isErr = false;
    requiredFields.forEach(e => {
        if (!e.value) {
            e.classList.add('requiredErr');
            isErr = true;
        } else {
            e.classList.remove('requiredErr');
        }
    });

    if (isErr) {
        throw 'RequiredErr';
    }
}
function verifyPassword() {
    if (passwordFields[0].value !== passwordFields[1].value) {
        throw 'PasswordNotCompare';
    }
}
function verifyEmail(field) {
    if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(field.value)) {
        field.classList.remove('requiredErr');
    } else {
        field.classList.add('requiredErr');
        throw 'EmailErr';
    }
}
async function onSubmit(e) {
    try {
        await verifyRequired();
        await verifyPassword();
        await verifyEmail(requiredFields[2]);
        // registerForm.submit();
    } catch(e) {
        // statements
        console.log(e);
    }
}
</script>